<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1300">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fef2f2"/>
      <stop offset="100%" style="stop-color:#fee2e2"/>
    </linearGradient>
    <filter id="shadow">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-opacity="0.2"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#dc2626"/>
    </marker>
  </defs>
  
  <rect width="1800" height="1300" fill="url(#bgGrad)"/>
  
  <!-- Title -->
  <text x="900" y="70" text-anchor="middle" fill="#991b1b" font-family="Arial, sans-serif" font-size="52" font-weight="bold">Chain Rule</text>
  <text x="900" y="120" text-anchor="middle" fill="#dc2626" font-family="Arial, sans-serif" font-size="26">The Foundation of Backpropagation in Deep Learning</text>
  
  <!-- Basic Formula -->
  <g transform="translate(100, 170)" filter="url(#shadow)">
    <rect width="1600" height="180" rx="18" fill="#ffffff" stroke="#ef4444" stroke-width="4"/>
    <text x="800" y="50" text-anchor="middle" fill="#ef4444" font-family="Arial, sans-serif" font-size="36" font-weight="bold">Chain Rule Formula</text>
    <line x1="40" y1="70" x2="1560" y2="70" stroke="#fecaca" stroke-width="2"/>
    
    <rect x="100" y="95" width="1400" height="70" fill="#fee2e2" rx="14"/>
    <text x="800" y="145" text-anchor="middle" fill="#991b1b" font-family="Consolas, monospace" font-size="42" font-weight="bold">d/dx [f(g(x))] = f'(g(x)) Ã— g'(x)</text>
  </g>
  
  <!-- Visual Representation -->
  <g transform="translate(100, 400)" filter="url(#shadow)">
    <rect width="1600" height="380" rx="18" fill="#ffffff" stroke="#3b82f6" stroke-width="4"/>
    <text x="800" y="50" text-anchor="middle" fill="#3b82f6" font-family="Arial, sans-serif" font-size="36" font-weight="bold">ğŸ“Š Visual Representation</text>
    <line x1="40" y1="70" x2="1560" y2="70" stroke="#bfdbfe" stroke-width="2"/>
    
    <!-- Function composition boxes -->
    <g transform="translate(200, 130)">
      <!-- Input -->
      <rect x="0" y="40" width="150" height="80" rx="14" fill="#f0fdf4" stroke="#10b981" stroke-width="3"/>
      <text x="75" y="85" text-anchor="middle" fill="#10b981" font-family="Arial, sans-serif" font-size="28" font-weight="bold">x</text>
      
      <!-- Arrow 1 -->
      <line x1="150" y1="80" x2="230" y2="80" stroke="#dc2626" stroke-width="4" marker-end="url(#arrow)"/>
      <text x="190" y="65" text-anchor="middle" fill="#dc2626" font-family="Arial, sans-serif" font-size="20" font-weight="bold">g(x)</text>
      
      <!-- Inner Function -->
      <rect x="230" y="40" width="200" height="80" rx="14" fill="#eff6ff" stroke="#3b82f6" stroke-width="3"/>
      <text x="330" y="75" text-anchor="middle" fill="#3b82f6" font-family="Arial, sans-serif" font-size="26" font-weight="bold">g(x)</text>
      <text x="330" y="105" text-anchor="middle" fill="#1e3a8a" font-family="Arial, sans-serif" font-size="18">Inner function</text>
      
      <!-- Arrow 2 -->
      <line x1="430" y1="80" x2="510" y2="80" stroke="#dc2626" stroke-width="4" marker-end="url(#arrow)"/>
      <text x="470" y="65" text-anchor="middle" fill="#dc2626" font-family="Arial, sans-serif" font-size="20" font-weight="bold">f(...)</text>
      
      <!-- Outer Function -->
      <rect x="510" y="40" width="200" height="80" rx="14" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
      <text x="610" y="75" text-anchor="middle" fill="#f59e0b" font-family="Arial, sans-serif" font-size="26" font-weight="bold">f(g(x))</text>
      <text x="610" y="105" text-anchor="middle" fill="#92400e" font-family="Arial, sans-serif" font-size="18">Outer function</text>
      
      <!-- Arrow 3 -->
      <line x1="710" y1="80" x2="790" y2="80" stroke="#dc2626" stroke-width="4" marker-end="url(#arrow)"/>
      
      <!-- Output -->
      <rect x="790" y="40" width="150" height="80" rx="14" fill="#fee2e2" stroke="#ef4444" stroke-width="3"/>
      <text x="865" y="85" text-anchor="middle" fill="#ef4444" font-family="Arial, sans-serif" font-size="28" font-weight="bold">y</text>
    </g>
    
    <!-- Derivative Flow -->
    <g transform="translate(200, 260)">
      <text x="470" y="0" text-anchor="middle" fill="#991b1b" font-family="Arial, sans-serif" font-size="28" font-weight="bold">Derivative Flow (Backward):</text>
      
      <!-- Backward arrows -->
      <line x1="800" y1="50" x2="720" y2="50" stroke="#10b981" stroke-width="5" marker-end="url(#arrow)"/>
      <text x="760" y="40" text-anchor="middle" fill="#10b981" font-family="Arial, sans-serif" font-size="20" font-weight="bold">Ã—f'(g(x))</text>
      
      <line x1="420" y1="50" x2="340" y2="50" stroke="#10b981" stroke-width="5" marker-end="url(#arrow)"/>
      <text x="380" y="40" text-anchor="middle" fill="#10b981" font-family="Arial, sans-serif" font-size="20" font-weight="bold">Ã—g'(x)</text>
      
      <text x="100" y="55" fill="#10b981" font-family="Arial, sans-serif" font-size="22" font-weight="bold">dy/dx =</text>
    </g>
  </g>
  
  <!-- Example -->
  <g transform="translate(100, 840)" filter="url(#shadow)">
    <rect width="750" height="380" rx="18" fill="#ffffff" stroke="#8b5cf6" stroke-width="4"/>
    <text x="375" y="50" text-anchor="middle" fill="#8b5cf6" font-family="Arial, sans-serif" font-size="34" font-weight="bold">ğŸ“ Example 1: Nested Functions</text>
    <line x1="30" y1="70" x2="720" y2="70" stroke="#e9d5ff" stroke-width="2"/>
    
    <g transform="translate(40, 100)">
      <text x="335" y="0" text-anchor="middle" fill="#7c3aed" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Given:</text>
      <rect x="80" y="15" width="590" height="55" fill="#faf5ff" rx="12"/>
      <text x="335" y="53" text-anchor="middle" fill="#6b21a8" font-family="Consolas, monospace" font-size="28">y = (3xÂ² + 2x)âµ</text>
      
      <text x="335" y="105" text-anchor="middle" fill="#7c3aed" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Let g(x) = 3xÂ² + 2x  and  f(u) = uâµ</text>
      
      <rect x="80" y="130" width="590" height="55" fill="#f3e8ff" rx="12"/>
      <text x="335" y="168" text-anchor="middle" fill="#6b21a8" font-family="Consolas, monospace" font-size="26">f'(u) = 5uâ´,  g'(x) = 6x + 2</text>
      
      <text x="335" y="220" text-anchor="middle" fill="#7c3aed" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Therefore:</text>
      <rect x="30" y="235" width="640" height="60" fill="#ede9fe" rx="12"/>
      <text x="335" y="275" text-anchor="middle" fill="#6b21a8" font-family="Consolas, monospace" font-size="26">dy/dx = 5(3xÂ² + 2x)â´ Ã— (6x + 2)</text>
    </g>
  </g>
  
  <!-- ML Application -->
  <g transform="translate(900, 840)" filter="url(#shadow)">
    <rect width="800" height="380" rx="18" fill="#ffffff" stroke="#10b981" stroke-width="4"/>
    <text x="400" y="50" text-anchor="middle" fill="#10b981" font-family="Arial, sans-serif" font-size="34" font-weight="bold">ğŸ§  Neural Network Example</text>
    <line x1="30" y1="70" x2="770" y2="70" stroke="#d1fae5" stroke-width="2"/>
    
    <g transform="translate(40, 100)">
      <text x="360" y="0" text-anchor="middle" fill="#059669" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Single Neuron:</text>
      <rect x="80" y="15" width="640" height="55" fill="#f0fdf4" rx="12"/>
      <text x="360" y="53" text-anchor="middle" fill="#065f46" font-family="Consolas, monospace" font-size="26">y = Ïƒ(Wx + b)</text>
      
      <text x="360" y="100" text-anchor="middle" fill="#059669" font-family="Arial, sans-serif" font-size="22">where Ïƒ is activation (e.g., sigmoid)</text>
      
      <text x="360" y="145" text-anchor="middle" fill="#059669" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Chain Rule Application:</text>
      <rect x="30" y="160" width="680" height="75" fill="#dcfce7" rx="12"/>
      <text x="360" y="193" text-anchor="middle" fill="#065f46" font-family="Consolas, monospace" font-size="24">âˆ‚L/âˆ‚W = âˆ‚L/âˆ‚y Ã— âˆ‚y/âˆ‚z Ã— âˆ‚z/âˆ‚W</text>
      <text x="360" y="223" text-anchor="middle" fill="#166534" font-family="Arial, sans-serif" font-size="19">where z = Wx + b</text>
      
      <rect x="50" y="260" width="660" height="100" fill="#fef3c7" rx="12"/>
      <text x="360" y="295" text-anchor="middle" fill="#92400e" font-family="Arial, sans-serif" font-size="22" font-weight="bold">ğŸ”¥ This is Backpropagation!</text>
      <text x="360" y="325" text-anchor="middle" fill="#78350f" font-family="Arial, sans-serif" font-size="18">Chain rule computes gradients</text>
      <text x="360" y="348" text-anchor="middle" fill="#78350f" font-family="Arial, sans-serif" font-size="18">layer-by-layer backward through the network</text>
    </g>
  </g>
</svg>
