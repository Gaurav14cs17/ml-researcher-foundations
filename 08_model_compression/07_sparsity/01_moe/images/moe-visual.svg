<?xml version="1.0" ?>
<ns0:svg xmlns:ns0="http://www.w3.org/2000/svg" viewBox="0.0 0.0 1800.0 1080.0">
  <ns0:defs>
    <ns0:linearGradient id="moeBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <ns0:stop offset="0%" style="stop-color:#ffffff"/>
      <ns0:stop offset="100%" style="stop-color:#2d2d2d"/>
    </ns0:linearGradient>
  </ns0:defs>
  <ns0:rect width="1800.0" height="1080.0" fill="#f8f9fa" rx="8"/>
  <ns0:text x="400" y="30" text-anchor="middle" fill="#6a1b9a" font-family="Arial, sans-serif" font-size="18" font-weight="bold">Mixture of Experts (MoE)</ns0:text>
  <ns0:text x="400" y="52" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="11">Conditional Computation - Only activate some experts!</ns0:text>
  <ns0:g transform="translate(40, 100)">
    <ns0:rect width="100" height="60" rx="8" fill="#1565c0"/>
    <ns0:text x="50" y="77.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Input x</ns0:text>
    <ns0:text x="50" y="102.0" text-anchor="middle" fill="#1565c0" font-family="Arial, sans-serif" font-size="9">Token</ns0:text>
  </ns0:g>
  <ns0:path d="M145 130 L190 130" stroke="#28a745" stroke-width="2" fill="none"/>
  <ns0:g transform="translate(195, 95)">
    <ns0:rect width="120" height="70" rx="8" fill="#1a237e" stroke="#fd7e14" stroke-width="2"/>
    <ns0:text x="60" y="127.0" text-anchor="middle" fill="#e65100" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Router</ns0:text>
    <ns0:text x="60" y="152.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="9">g(x) = softmax</ns0:text>
    <ns0:text x="60" y="177.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="9">Select top-2</ns0:text>
  </ns0:g>
  <ns0:g transform="translate(380, 70)">
    <ns0:rect x="0" y="0" width="90" height="45" rx="6" fill="#2e7d32"/>
    <ns0:text x="45" y="202.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Expert 1</ns0:text>
    <ns0:text x="45" y="227.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="8">Active w=0.6</ns0:text>
    <ns0:rect x="0" y="55" width="90" height="45" rx="6" fill="#374151" stroke="#e0e0e0"/>
    <ns0:text x="45" y="252.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10">Expert 2</ns0:text>
    <ns0:text x="45" y="277.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="8">Skipped</ns0:text>
    <ns0:rect x="0" y="110" width="90" height="45" rx="6" fill="#2e7d32"/>
    <ns0:text x="45" y="302.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Expert 3</ns0:text>
    <ns0:text x="45" y="327.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="8">Active w=0.4</ns0:text>
    <ns0:rect x="0" y="165" width="90" height="45" rx="6" fill="#374151" stroke="#e0e0e0"/>
    <ns0:text x="45" y="352.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10">Expert 4</ns0:text>
    <ns0:text x="45" y="377.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="8">Skipped</ns0:text>
  </ns0:g>
  <ns0:path d="M320 130 L375 45" stroke="#28a745" stroke-width="2" fill="none"/>
  <ns0:path d="M320 130 L375 135" stroke="#28a745" stroke-width="2" fill="none"/>
  <ns0:path d="M320 130 L375 80" stroke="#e0e0e0" stroke-width="1" stroke-dasharray="4"/>
  <ns0:path d="M320 130 L375 190" stroke="#e0e0e0" stroke-width="1" stroke-dasharray="4"/>
  <ns0:g transform="translate(520, 105)">
    <ns0:rect width="120" height="60" rx="8" fill="#1a237e" stroke="#28a745" stroke-width="2"/>
    <ns0:text x="60" y="402.0" text-anchor="middle" fill="#2e7d32" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Output</ns0:text>
    <ns0:text x="60" y="427.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="9">0.6*E1 + 0.4*E3</ns0:text>
  </ns0:g>
  <ns0:path d="M475 45 L515 125" stroke="#28a745" stroke-width="2" fill="none"/>
  <ns0:path d="M475 135 L515 135" stroke="#28a745" stroke-width="2" fill="none"/>
  <ns0:g transform="translate(80, 320)">
    <ns0:rect width="640" height="130" rx="12" fill="#1a237e" stroke="#6f42c1" stroke-width="2"/>
    <ns0:text x="320" y="452.0" text-anchor="middle" fill="#6a1b9a" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Mixtral 8x7B (Example)</ns0:text>
    <ns0:text x="160" y="477.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="11">Total Params: 46B</ns0:text>
    <ns0:text x="320" y="502.0" text-anchor="middle" fill="#2e7d32" font-family="Arial, sans-serif" font-size="11">Active Params: 12B</ns0:text>
    <ns0:text x="480" y="527.0" text-anchor="middle" fill="#e65100" font-family="Arial, sans-serif" font-size="11">8 experts, top-2</ns0:text>
    <ns0:text x="160" y="552.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10">Quality = 70B dense</ns0:text>
    <ns0:text x="320" y="577.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10">6x more efficient!</ns0:text>
    <ns0:text x="480" y="602.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10">Dynamic routing</ns0:text>
    <ns0:text x="320" y="627.0" text-anchor="middle" fill="#1a237e" font-family="Arial, sans-serif" font-size="10">Each token uses different experts based on content!</ns0:text>
  </ns0:g>
</ns0:svg>